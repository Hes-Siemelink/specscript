$schema: "https://spec.it/schemas/types/v1-beta"

imports:
  - SpecScript

types:

  If:
    union:
      - ConditionBase
      - Then
      - Else

  When:
    array:
      oneOf:
        - union:
            - type: Condition
            - object:
                then:
                  type: SpecScript
                  required: true
        - object:
            else:
              type: SpecScript
              required: true
          maxOccurs: 1

---
types:

  Condition:
    oneOf:
      - All
      - Any
      - Empty
      - Equals
      - In
      - Not


  Container:
    oneOf:
      - string
      - array
      - object

  Equals:
    object:
      item: any
      equals: any

  All:
    object:
      all:
        array: Condition

  Any:
    object:
      any:
        array: Condition

  Not:
    object:
      not: Condition

  Empty:
    object:
      empty: Container

  In:
    object:
      in: Container


